var queue = [733419,733420,733421,733422,733423,733424,733425,733426,733427,733428,733429,733430,733431,733432,733433,733434,733435,733436,733437,733438,733439,733440,733441,733442,733443,733444,733445,733446,733447,733448,733449,733450,733451,733452,733453,733454,733455,733456,733457,733458,733459,733460,733461,733462,733463,733464,733465,733466,733527,733528,733529,733531,733532,733533,733535,734140,734141,734163,734173,734174,734175,734176,734177,734178,734179,734180,734181,734182,734183,734184,734185,734186,734187,734188,734189,734190,734191,734192,734193,734194,734195,734196,734197,734198,734199,734200,734201,734202,734203,734206,734207,734208,734209,734210,734211,734212,734213,734214,734215,734217,734218,734219,734220,734221,734222,734223,734227,734228,734229,734230,734232,734233,734234,734235,734236,734237,734238,744767,744768,744769,758066,758067,758068,758069,758475,758476]
var __token ='898f99a7-8784-13db-83ff-16bd497e8754'
var views = "3.138.248"
var cokie_1 = "_gid=GA1.2.507584239.1690689562; .ASPXAUTH=F9C2893CD8C6B8123CC27B3964FEE3405084A7F3ABF0BB66A8B7767E91BBB1B48EB0B139092B8F6CDC5B6DFE570D455E3FEABE997AC257420704FBA9C979326F1B5522038C0A33EA8FA1B52B6CF449DFBB7155356B844BD6DA5D6B0CEF4C7405051D1E7250CAFE97F1EB668DF6698C60D603AE81E31E66655C50DF84304D16FFA10EC818422A572137466710DCD02CFD8E4334AA024E3A45443F4BC10D2C60937B72B3F3686AF1E4CB3A1835A58CE8096228603F3DFB19A52F63651F0EDA034C4F7EBB8701EC217B8B4E5EC863775618F0B784C4; comicvisitor=ef4f2c95-d6d7-48c0-80fa-0f5516be1650; comicread=ef4f2c95-d6d7-48c0-80fa-0f5516be1650; _gat_gtag_UA_57670566_10=1; ASP.NET_SessionId=5lez41qwi0ol3x2x2wd0jfqz; ASP.NET_SessionId=almoffuwa2osoppkn1pdg0pk; www.nettruyenmax.comportalroles=E2624250184AED3B058DE3DEA4031762A1BE5C99112FB973C7344D8492B0D16FD4E192EE784C3430F7A8AC5028AA163B787D4DE12BF3A36496CF82BB6D580F10B69D03B12633BD1064FC405D305A4F9BA2681143FB703B6464C7A4647147B9FE077EF7C868047E99EBB415546AA7DBDDA3C1BDADB93C03BABA7FAF2B9A3BAA4A35D49553BE6B062A43288B48BE0ECD5E4A9F206698F0C90E76238638A883646968144BF7C8367E3EEF34AD4A19CDEA65D373E8B0; _ga_4X7L3HYB4K=GS1.1.1690689562.1.1.1690690176.0.0.0; _ga=GA1.2.2088391471.1690689562"
var cokie_2 = "comment_name=CHiáº¿n Tháº§n; _gid=GA1.2.27935727.1690620689; .ASPXAUTH=7FFAF09FF87B7B63310B4C5DEE12C85C3463383200ACE1921098F83CD96E265752E6680DEAEC497D8929F6C6C344251F2824E13F7D032F864AEB25D150703DB1DBF64CF099B2615E355C88FE2453E482F072346D777ED3595E2E7F165FF001B471F9689B2C46C6F043190A6A217A1D49D7237FF5FC39A736AF126DC4A1FA9BFE47EEDE660422ACBF09B173C47F7739FE078FA786E8817C871BB9AAC20E88A2E30970522DABE81C5D5C60B923A74304338F034A5858AE7CC9706898B9E7392DD5001D9F7A; comicvisitor=43fd3bc5-373e-4d29-b3d3-78fa6bdfe0ca; comicread=43fd3bc5-373e-4d29-b3d3-78fa6bdfe0ca; _gat_gtag_UA_57670566_10=1; www.nettruyenmax.comportalroles=721A5046F5ECC1BD75EA6057C575F9DF261F7855A81F145E40BCAE228E7CFE820B38EF91A26C8E394073D9A0035E35D498FEC1B9CCB12D19CFD4B352C2CFC859ED75290EC0B5BC7FD1A50E2130AA7708DEC208BAB9DA102E92959106C8CBE6EE5D5BBF69C9EF4F36A86A6A92A546DAE2A4C5BE7AC9E3337AC93CBA38DE53E253F6BB062DB6ACD922FED5DDB6CBDAB57D144944E03C45ECF964EDF9209270F90E69559829; _ga_4X7L3HYB4K=GS1.1.1690687208.29.1.1690690237.0.0.0; _ga=GA1.2.780534756.1687262041"
var cokie_3 = ""
var cokie_4 = ""




var __count =0
async function readchap(num,ctoken,cokie,numcokie){
    await new Promise((resolve) => {
        let data = {
            chapterId: queue[num],
            comicToken: ctoken,
            userToken: ''
        }
        
        fetch('https://f.nettruyenmax.com/Comic/Services/ComicService.asmx/ChapterLoaded',{
            method: "POST",
            headers: {
                'Content-Type': "application/json",
                'Cookie': cokie,
            },
            body:JSON.stringify(data),
        })
            .then((response) => response.text())
            .then((body) => {
                var er = body
                let succ = (er.match(/"success":(.*?),/)||[])[1]
                if(succ=="true"){
                    let token = er.match(/"token":"(.*?)"/)[1]
                    let dataread ={
                        chapterId: data.chapterId,
                        token: token
                    }
        
                    fetch('https://f.nettruyenmax.com/Comic/Services/ComicService.asmx/Read',{
                        method: "POST",
                        headers: {
                            'Content-Type': "application/json",
                            'Cookie':cokie,
                        },
                        body:JSON.stringify(dataread),
                    })
                        .then((response) => response.text())
                        .then((body) => {
                            let succ2 = (body.match(/"success":(.*?),/)||[])[1]
                           
                            if(succ2=='true'){
                                __count++
                                setTimeout(resolve,1000)
                            }else{
                                resolve()
                            }
                        }); 
                }
            }); 
    })
}


async function main(){
    for(i=0;i<queue.length;i++){
        await readchap(i,__token,cokie_1,'c1')
        await readchap(i,__token,cokie_2,'c2')
    }
    console.log(__count)
    main()
}

main()